"""Testdevice M83AAA1BB2CC.

Simulates a Motorola M83AAA1BB2CC device for testing purposes.
Awaits incoming messages until user presses Enter. Then it starts sending
messages from the predefined list in a loop with a delay.

"""

import serial
import threading
import time

# config
SERIAL_PORT = "/dev/pts/6"
BAUDRATE = 38400
TIMEOUT = 1

# ['',
#  '+CTSDSR,12,1234567,0,9876543,0,880A30000000000007FFE810',
#  '+CTSDSR,12,4567891,0,9876543,0,880A007264F2654E89020810',
#  '+CTSDSR,12,1472583,0,9876543,0,880A0070EDD264D6214DC820',
#  '+CTSDSR,12,1234567,0,9876543,0,880A30000000000007FFE810',
#  '+CTSDSR,12,4567891,0,9876543,0,880A007264F2654E89020810',
#  'OK',
#  '']

messages = [
    # "\r\nOK\r\n",
    # "\r\nOK\r\n",
    # "\r\nOK\r\n",
    # "\r\nOK\r\n",
    # "\r\nOK\r\n",
    "\r\nOK\r\n",
    "\r\n+CTSDSR: 13,1234567,0,9876543,0,16\r\n8004\r\n",
    # "\r\n+CTSDSR: 12,1234567,0,9876543,0,88\r\n0A30000",
    # "000000007FFE810\r\n",
    "\r\n+CTSDSR: 12,1234567,0,9876543,0,88\r\n0A007264",
    "E2654E91020810\r\n",
    # "\r\n+CTSDSR: 12,1234567,0,9876543,0,88\r\n0A3000000",
    # "0000007FFE810\r\n",
    # "\r\n+ENCR: 15,SHFW",
    # " SE 86-40TSF-GW 02\r\n",
    # "\r\n+ENCR",
    # ": 15,SH PI KRLS WEST 07\r\n",
    # "\r\n+ENCR: 15,SHFW SE 86-40TS",
    # "F-GW 02\r\n",
    # "\r\n+ENCR: 15,SH PI KRLS WEST 07\r\n",
    # "\r\n+CTSDSR: 12,4567891,0,9876543,0,88\r\n0A007264E2654E9",
    # "2020810\r\n",
    # "\r\n+CTSDSR: 12,1234567,0,9876543,0,88\r\n0A30000000000007FFE",
    # "810\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,",
    # "9876543,0,88\r\n0A007257D26552A24B2820\r\n",
    # "\r\n+CTSDSR: 12,7891234",
    # ",0,9876543,0,88\r\n0A007257EA65522A432820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A00",
    # "7252B2654B22080820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n",  # this
    # "0A007252C2654BA20F0820\r\n",  # this
    # "\r\n+CTSDSR: 12,4567891,0,9876543,0,88",
    # "\r\n0A007264CA654E89020810\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A",
    # "007251F26544B2592820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,8",
    # "8\r\n0A007250726542A9392820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0072464A6",
    # "540E2656820\r\n",
    # "\r\n+CTSDSR: 12,6",
    # "377463,0,9876543,0,88\r\n0A007244326540415B8820\r\n",
    # "\r\n+CTSDS",
    # "R: 12,1472583,0,9876543,0,88\r\n0A00723372653FF2574820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,",
    # "0,88\r\n0A00723022653E7A6B4820\r\n",
    # "\r\n+CTSDSR: 12,13205",
    # "20,0,9876543,0,88\r\n0A00721F126537C2756820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A007",
    # "21AF2653642696820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A007207E26531816D882",
    # "0\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,437856",
    # "5,0,88\r\n0A007205F2653151618820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0071F1",
    # "5A653071656820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A0071F",
    # "1BA653071676820\r\n",
    # "\r\n+CTSDSR: 12,1234567,0,9876543,0,88\r\n0A30000000000007FFE810\r",
    # "\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0071D70A652B91716820\r",
    # "\n",
    # "\r\n+CTSDSR: 12,7891234,0,43",
    # "78565,0,88\r\n0A0071D8EA652BB96F6820\r\n",
    # "\r\n+CTSDSR: 12,132",
    # "0520,0,9876543,0,88\r\n0A0071B89A652CF96F8820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A",
    # "0071BBB2652CB1758820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0071A40A652A315D482",
    # "0\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A0071A23265294A6B",
    # "4820\r\n",
    # "\r\n+CTSDSR",
    # ": 12,1472583,0,9876543,0,88\r\n0A0071980A65235A074820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r",
    # "\n0A007198BA65228144E820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A007196C26519B95B28",
    # "20\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A007195E",
    # "26517315B2820\r\n",
    # "\r\n+CTSDSR: ",
    # "12,1472583,0,9876543,0,88\r\n0A0071927A650F41530820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r",
    # "\n0A00719342650C9154E820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A007193226505714",
    # "EE820\r\n",
    # "\r\n+CTSDSR: 12,637746",
    # "3,0,9876543,0,88\r\n0A007194DA6502E94CE820\r\n",
    # "\r\n+CTSDSR",
    # ": 12,1472583,0,9876543,0,88\r\n0A0071995264FEB146E820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A00719ADA64FC824EE820",
    # "\r\n",
    # "\r\n+CTSDSR: 12,1472583,0",
    # ",9876543,0,88\r\n0A00719CEA64F569592820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A00719A926",
    # "4F2F1574820\r\n",
    # "\r\n+CTSD",
    # "SR: 12,1472583,0,9876543,0,88\r\n0A00718E9A64F049556820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A00718C1A64EE2A5B4820",
    # "\r\n",
    # "\r\n+CTSDSR: 12,1472583",
    # ",0,9876543,0,88\r\n0A0071833264E63A632820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A007182C",
    # "A64E379630820\r\n",
    # "\r\n+",
    # "CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0071813264D7DA674820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,43785",
    # "65,0,88\r\n0A00717E7264D6F15F6820\r\n",
    # "\r\n+CTSDSR: 12",
    # ",1472583,0,9876543,0,88\r\n0A00717A5264CB49592820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A007",
    # "17A9264CB31472820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A00716AA264C9415B6820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A007167AA64C8C96",
    # "38820\r\n",
    # "\r\n+CTSDSR: 12,4567891,0,9876543,0,88\r\n0A007264D2654E8A02081",
    # "0\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0",
    # "A007154C264CCB96DA820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88",
    # "\r\n0A00714F5264CE216DA820\r\n",
    # "\r\n+CTSDSR: 12,1472583",
    # ",0,9876543,0,88\r\n0A00713B0A64D3216DA820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A007136E264D3D",
    # "A6D8820\r\n",
    # "\r\n+CTSDS",
    # "R: 12,1472583,0,9876543,0,88\r\n0A007122FA64D55A638820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,437856",
    # "5,0,88\r\n0A00711D2A64D5B1698820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,",
    # "9876543,0,88\r\n0A0071111264D672538820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A00710BFA64D",
    # "619558820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,",
    # "88\r\n0A0071008264D5D1578820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A0070FC7A64D549538820",
    # "\r\n",
    # "\r\n+CTSDSR: 12,1472583",
    # ",0,9876543,0,88\r\n0A0070F4F264D351392820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A",
    # "0070F42A64D282434820\r\n",
    # "\r\n+CTSDSR: 12,1234567,0,9876543,0,8",
    # "8\r\n0A30000000000007FFE810\r\n",
    # "\r",
    # "\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0070F15264D0A1040820\r\n",
    # "\r\n+CTSDSR: 12,4567891,0,9876543,0,88\r\n0A007264D26",
    # "54E91020810\r\n",
    # "\r\n+CTSDSR: 12,7891234,",
    # "0,9876543,0,88\r\n0A0070F16A64D0DA000810\r\n",
    # "\r\n+CTSDSR: 12,1234567,0,9876543,0,88\r",
    # "\n0A30000000000007FFE810\r\n",
    # "\r\n+CTSDSR: 12,4567891,0,9876543,0,88\r\n0A007264D2654E89020",
    # "810\r\n",
    # "\r\n+CTSDSR: 12,7891234,",
    # "0,9876543,0,88\r\n0A0070ED4264CCA13B2820\r\n",
    # "\r\n+CTSDSR: 12,63774",
    # "63,0,9876543,0,88\r\n0A0070E80264C6E13D2820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,4378",
    # "565,0,88\r\n0A0070E78A64C26152C820\r\n",
    # "\r\n+CTSDSR: 12,1234567,0,9876543,0,88\r\n0A3000000",
    # "0000007FFE810\r\n",
    # "\r\n+CTSDSR: ",
    # "12,7891234,0,9876543,0,88\r\n0A0070F69264BAC958E820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A0070F73264B74138C82",
    # "0\r\n",
    # "\r",
    # "\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0070F3F264D1E1020810\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A00",
    # "70F56264D4810FC820\r\n",
    # "\r\n+CTS",
    # "DSR: 12,7891234,0,9876543,0,88\r\n0A0070FE3A64BD19442820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,437",
    # "8565,0,88\r\n0A0070EC1264D7314DC820\r\n",
    # "\r\n+CTSDSR: 12,63774",
    # "63,0,9876543,0,88\r\n0A00710ABA64C1B1466820\r\n",
    # "\r\n+CTSDSR: 12,4567891,0,4",
    # "378565,0,88\r\n0A007264CA654E91020810\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,43",
    # "78565,0,88\r\n0A0070E20264DC8249A820\r\n",
    # "\r\n+CTSDSR:",
    # " 12,7891234,0,9876543,0,88\r\n0A00710EAA64C8814DE820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0070D",
    # "91264D871454820\r\n",
    # "\r\n+CTSDSR: 12,7891234,",
    # "0,9876543,0,88\r\n0A0071153264CF194E2820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A0071129A64D6795B",
    # "8820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r",
    # "\n0A0071024264D5B9538820\r\n",
    # "\r\n+CTSDSR: 12,637",
    # "7463,0,9876543,0,88\r\n0A0070F26264D4C927A820\r\n",
    # "\r",
    # "\n+CTSDSR: 12,1234567,0,9876543,0,88\r\n0A30000000000007FFE810\r\n",
    # "\r\n+CTSDSR: 12,1320",
    # "520,0,9876543,0,88\r\n0A0070D78A64D5913AE820\r\n",
    # "\r\n+CTSDSR: 1",
    # "2,4567891,0,9876543,0,88\r\n0A007264E2654E9A020810\r\n",
    # "\r\n+CTSDSR: 12,1",
    # "320520,0,9876543,0,88\r\n0A0070DDBA64CF2144E820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,8",
    # "8\r\n0A0070E4AA64C7B150E820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A0070E95A64",
    # "D9014DC820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A0070",
    # "DE3A64DC31414820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0070E5BA64C",
    # "B21262820\r\n",
    # "\r\n+CTSDS",
    # "R: 12,7891234,0,9876543,0,88\r\n0A0070D64A64D6893F4820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,43785",
    # "65,0,88\r\n0A0070CFDA64CEA9432820\r\n",
    # "\r\n+CTSDSR: 12,1472583",
    # ",0,9876543,0,88\r\n0A0070EAC264CA112D2820\r\n",
    # "\r\n+CTSDSR: 12,1234567,0,9876543,0,88\r\n0A",
    # "30000000000007FFE810\r\n",
    # "\r\n+CTSDSR: 1",
    # "2,7891234,0,9876543,0,88\r\n0A0070D89264C8F264A820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,",
    # "88\r\n0A0070ED3A64C04166A820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0070E5D264CB111A2",
    # "820\r\n",
    # "\r\n+CTSDSR: 12,637746",
    # "3,0,9876543,0,88\r\n0A0070FC9A64B5416AC820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A00710D3A64ABA144C820\r",
    # "\n",
    # "\r\n+CTSDSR",
    # ": 12,7891234,0,9876543,0,88\r\n0A007116E264A6095EC820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A007120FA64A33946482",
    # "0\r\n",
    # "\r\n+CTSDSR",
    # ": 12,1472583,0,9876543,0,88\r\n0A0070EB5264CA99112820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A",
    # "0071268264A63A1A6820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,",
    # "88\r\n0A0070E87A64C81113C820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0070E6",
    # "CA64CC31126820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0070EB6A64CAF9040820",
    # "\r\n",
    # "\r\n+CTSDSR: 12,1472583",
    # ",0,9876543,0,88\r\n0A0070F17264D171020820\r\n",
    # "\r\n+CTSDSR: 12,637",
    # "7462,0,9876543,0,88\r\n0A007264EA654E92020810\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0070F57A6",
    # "4D351322820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n",
    # "0A0070EDD264D6214DC820\r\n",
    # "\r\n+CTSDSR: 12,63774",
    # "61,0,9876543,0,88\r\n0A30000000000007FFE810\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0",
    # "070E19A64DCA953A820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,43785",
    # "65,0,88\r\n0A0070D9D264E02915A820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0070D4DA64E04127C8",
    # "20\r\n",
    # "\r\n+CTSDSR: 12,1472583",
    # ",0,9876543,0,88\r\n0A0070D23264E33121C820\r\n",
    # "\r\n+CTSDS",
    # "R: 12,1472583,0,9876543,0,88\r\n0A0070D05A64E5E115E820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,4",
    # "378565,0,88\r\n0A0070D13264EAF9340820\r\n",
    # "\r\n+CTSDSR: 1",
    # "2,7891234,0,9876543,0,88\r\n0A0071234264A4713F4810\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,43",
    # "78565,0,88\r\n0A0070CFA264EED139E820\r\n",
    # "\r\n+CTS",
    # "DSR: 12,7891234,0,9876543,0,88\r\n0A00711EBA64A249020820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0070CA7A64F5B13A",
    # "0820\r\n",
    # "\r\n+CTS",
    # "DSR: 12,1472583,0,9876543,0,88\r\n0A0070CD5A64FB61402820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A0071131264A8715FC",
    # "820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0070CDFA64FFE",
    # "1316820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A0",
    # "07103FA64B1294FC820\r\n",
    # "\r\n+CTSDSR: 12",
    # ",1472583,0,9876543,0,88\r\n0A0070BC8264FD59596820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0",
    # "A0070F85A64B8A967E820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0070ADE264F8C1556820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A0070E81A64C22967C82",
    # "0\r\n",
    # "\r\n+CTSDSR: 12,1472583,0",
    # ",9876543,0,88\r\n0A0070A07264F7F14D8820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A0070D49A",
    # "64CAB967C820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0070",
    # "8EA264F7095B8820\r\n",
    # "\r\n+C",
    # "TSDSR: 12,7891234,0,9876543,0,88\r\n0A0070C6CA64D052292820\r\n",
    # "\r\n+CTSDSR: 12,4567891,0,9876543,0,88\r\n0A007264EA",
    # "654E92020810\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0070827A64F6C1118820",
    # "\r\n",
    # "\r\n+CTSDS",
    # "R: 12,1472583,0,9876543,0,88\r\n0A007082A264ED99570820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0",
    # "07082AA64E3C92F0820\r\n",
    # "\r\n+CTSDSR: 12,1",
    # "320520,0,9876543,0,88\r\n0A007098AA64E1896C8820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0070B1A264DC7",
    # "16CC820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0",
    # ",9876543,0,88\r\n0A0070C5AA64D1515EA820\r\n",
    # "\r\n+CTSDSR: 12,1234567,0,9876543,0,88\r\n0A300000",
    # "00000007FFE810\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A0070C4C264D",
    # "011020810\r\n",
    # "\r\n+CTSDSR: 12,4567891,0,9876543,0",
    # ",88\r\n0A007264DA654E92020810\r\n",
    # "\r\n+CTSDSR: 12,13",
    # "20520,0,9876543,0,88\r\n0A0070C45A64D021020810\r\n",
    # "\r",
    # "\n+CTSDSR: 12,1234567,0,9876543,0,88\r\n0A30000000000007FFE810\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,437856",
    # "5,0,88\r\n0A0070C5CA64CBC9168820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A0070C7E",
    # "A64D091124820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,",
    # "9876543,0,88\r\n0A0070D1FA64D379286820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A0070D1F264D6",
    # "A9136820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,43785",
    # "65,0,88\r\n0A0070D27A64D3C9020820\r\n",
    # "\r\n+CTSDSR: 12,4567891,0,9876543,0,88",
    # "\r\n0A007264EA654E91020810\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0",
    # ",88\r\n0A0070C6BA64CF19020810\r\n",
    # "\r\n+CTSDSR: 12,1234567,0,9876543,0,88\r\n",
    # "0A30000000000007FFE810\r\n",
    # "\r\n+CTSDSR: 12,637746",
    # "3,0,9876543,0,88\r\n0A0070CF4264CE19190820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0070CCBA64CF2",
    # "158C820\r\n",
    # "\r\n+CTSDSR: 12,",
    # "7891234,0,9876543,0,88\r\n0A0070DABA64C83960A820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A007",
    # "0E0CA64C5516AC820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,437",
    # "8565,0,88\r\n0A0070EE6264C01160A820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0070F42264BD6160E820",
    # "\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A0070",
    # "F96A64B98124A820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0070FFC",
    # "A64B34168C820\r\n",
    # "\r\n+CTSDSR: 12,13",
    # "20520,0,9876543,0,88\r\n0A0071068A64AF7126C820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A007113E264",
    # "A7D160C820\r\n",
    # "\r\n+CTSDSR: 12,13",
    # "20520,0,9876543,0,88\r\n0A00711D5A64A2011CC820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0",
    # "071258264A579182820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,43",
    # "78565,0,88\r\n0A00711EB264AF1959E820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,4378",
    # "565,0,88\r\n0A00711AD264B75153E820\r\n",
    # "\r\n+CTSDSR: 12,1",
    # "320520,0,9876543,0,88\r\n0A00711AB264BD61342820\r\n",
    # "\r\n+CTSDSR: 12,132052",
    # "0,0,9876543,0,88\r\n0A00711D8A64C151342820\r\n",
    # "\r\n+CTSDSR: 12,63",
    # "77462,0,9876543,0,88\r\n0A007264E2654E89020810\r\n",
    # "\r\n+CTSDSR: 12,13205",
    # "20,0,9876543,0,88\r\n0A0071221264C24919E820\r\n",
    # "\r\n+CTSDSR: 12,1234567,0,9876543,0,88\r\n0",
    # "A30000000000007FFE810\r\n",
    # "\r\n+CTSDS",
    # "R: 12,1472583,0,9876543,0,88\r\n0A0071205A64C5F10B2820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A007125DA64C",
    # "989428820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,8",
    # "8\r\n0A00712AEA64CA31020820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r",
    # "\n0A0070F9EA64B90A1E0810\r\n",
    # "\r\n+CTSDSR: 12",
    # ",7891234,0,9876543,0,88\r\n0A0070FEFA64BDC9402820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,4",
    # "378565,0,88\r\n0A00710AC264C1C1426820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A007110",
    # "6264C08124C820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A0071",
    # "138A64BDD9294820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A00712CCA",
    # "64D4612DE820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,4378",
    # "565,0,88\r\n0A00710A3A64B689594820\r\n",
    # "\r\n+CTSDSR: 1",
    # "2,1472583,0,9876543,0,88\r\n0A0071271264D5010B8820\r\n",
    # "\r\n+CTSDSR: 12,637746",
    # "3,0,9876543,0,88\r\n0A0071019264B4414DC820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,43785",
    # "65,0,88\r\n0A007117F264D611518820\r\n",
    # "\r\n+CTSDS",
    # "R: 12,7891234,0,9876543,0,88\r\n0A0070F95A64B9D12FA820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A007108D264D5A94768",
    # "20\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A0",
    # "070F18A64BF2953C820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0070FA1A64D5115",
    # "58820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A0070EA4264C1494BA",
    # "820\r\n",
    # "\r\n+CTSDSR: 12,4567891,0,9876543,0,88\r\n0A007264F2654E89",
    # "020810\r\n",
    # "\r\n+CTSDSR: 12,1472583,0",
    # ",9876543,0,88\r\n0A0070EB7264D79951C820\r\n",
    # "\r\n+CTSDSR",
    # ": 12,7891234,0,9876543,0,88\r\n0A0070DB5264C8115FC820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A",
    # "0070E05A64DCAA4B8820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A0070CF626",
    # "4CE712E2820\r\n",
    # "\r\n+CTSDSR: 12,132052",
    # "0,0,9876543,0,88\r\n0A0070D74264D7392B2820\r\n",
    # "\r\n+CT",
    # "SDSR: 12,7891234,0,9876543,0,88\r\n0A0070D56264D5914A2820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543",
    # ",0,88\r\n0A0070DA9264D3C92CE820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0070DEEA64D4B",
    # "9224820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0",
    # ",88\r\n0A0070DA0264D44916E820\r\n",
    # "\r\n+CTSDSR: 12,637746",
    # "1,0,9876543,0,88\r\n0A30000000000007FFE810\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A0070DED264D4D1224",
    # "820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A0070",
    # "DB7264D31919C820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0070D97",
    # "A64D4F131C820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,4378",
    # "565,0,88\r\n0A0070D7BA64D6D929E820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0070D8C264D82934",
    # "4820\r\n",
    # "\r\n+CTSDS",
    # "R: 12,7891234,0,9876543,0,88\r\n0A0070DCB264DAEA484820\r\n",
    # "\r\n+CT",
    # "SDSR: 12,1472583,0,9876543,0,88\r\n0A0070E1EA64DC81408820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,9876543,0,88\r\n0A0070E6F264D",
    # "B0940C820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,43",
    # "78565,0,88\r\n0A0070EB4264D7B14AC820\r\n",
    # "\r\n+CTSDSR",
    # ": 12,7891234,0,9876543,0,88\r\n0A0070F03A64D5394AA820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0",
    # "070F59264D3B12B2820\r\n",
    # "\r\n+CTSDSR: 12,7891234,0,4",
    # "378565,0,88\r\n0A0070F37A64D1F9114820\r\n",
    # "\r\n+CTSDSR: 12,132052",
    # "0,0,9876543,0,88\r\n0A0070F24264D119094820\r\n",
    # "\r\n+CTSDSR: 12,4567891,0,9876543,0,88\r\n0A007264F2654E8A020810\r",
    # "\n",
    # "\r\n+CTSDSR: 12,1234567,0,4",
    # "378565,0,88\r\n0A30000000000007FFE810\r\n",
    # "\r\n+CTSDSR: 12,4567891,0,9876543,0,88\r\n",
    # "0A007264F2654E89020810\r\n",
    # "\r\n+CT",
    # "SDSR: 12,1234567,0,9876543,0,88\r\n0A30000000000007FFE810\r\n",
    # "\r\n+CTSDSR: 12,6377",
    # "462,0,9876543,0,88\r\n0A007264EA654E92040810\r\n",
    # "\r\n+CTSDSR: 1",
    # "2,1234567,0,9876543,0,88\r\n0A30000000000007FFE810\r\n",
    # "\r\n+CTSDSR: 12,637746",
    # "2,0,9876543,0,88\r\n0A007264EA654E9A020810\r\n",
    # "\r\n+CTSDSR: 12,637746",
    # "1,0,9876543,0,88\r\n0A30000000000007FFE810\r\n",
    # "\r",
    # "\n+CTSDSR: 12,4567891,0,9876543,0,88\r\n0A007264DA654E99020810\r\n",
    # "\r\n+CTSDSR: 12,1234567,0,43785",
    # "65,0,88\r\n0A30000000000007FFE810\r\n",
    # "\r\n+CTS",
    # "DSR: 12,4567891,0,9876543,0,88\r\n0A007264FA654EAA020810\r\n",
    # "\r\n+CTSDSR: 12,1234567,0,9876543,0,88\r\n0A",
    # "30000000000007FFE810\r\n",
    # "\r\n+ENCR: 15,SH PI KRLS WEST 11\r\n",
    # "\r\n+ENCR: 15,S",
    # "HFW SE 56-41TSF-W 04\r\n",
    # "\r\n+ENCR: 15,SH ",
    # "PI KRLS WEST 11\r\n",
    # "\r\n+ENCR: 15,SHFW SE 56-41TSF-W ",
    # " 04\r\n",
    # "\r\n+CTSDSR: 12,4567891,0,9876543,0,88\r\n0A007264",
    # "F2654EB2040810\r\n",
    # "\r\n+CTSDSR: 12",
    # ",1234567,0,9876543,0,88\r\n0A30000000000007FFE810\r\n",
    # "\r\n+CTSDSR: 12,4567891,0,437",
    # "8565,0,88\r\n0A007264F2654EBA020810\r\n",
    # "\r\n+CTSDSR: 12,1234567,0",
    # ",9876543,0,88\r\n0A30000000000007FFE810\r\n",
    # "\r\n+C",
    # "TSDSR: 12,4567891,0,9876543,0,88\r\n0A007264E2654EA1020810\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A00713",
    # "55A64D3D1608820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,4",
    # "378565,0,88\r\n0A007149CA64CF6162A820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A00",
    # "715E2264CA6160A820\r\n",
    # "\r\n+CTSDSR: 12,1472583",
    # ",0,9876543,0,88\r\n0A0071729264CA31606820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A",
    # "00717B3264CD29520820\r\n",
    # "\r\n+CTSDSR: 12,1234567,0,9876543,0,88\r\n0A30000000000007FFE810\r",
    # "\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A00717FE264D812",
    # "5A4820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88",
    # "\r\n0A007182D264E32161E820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A00718BEA64ED4",
    # "15A4820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,437",
    # "8565,0,88\r\n0A0071997A64F251544820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A00719B3264F",
    # "BF957E820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,",
    # "0,88\r\n0A0071939265050955E820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A007192B2",
    # "650EC955E820\r\n",
    # "\r\n+CTSDSR: 12,1472583",
    # ",0,9876543,0,88\r\n0A0071968A651849502820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A007198",
    # "D265229947E820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0071A1E26528F958",
    # "4820\r\n",
    # "\r\n+",
    # "CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0071B272652D115E8820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0071C852652BF16",
    # "28820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A",
    # "0071DE22652C99606820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0071F002652FC",
    # "1566820\r\n",
    # "\r\n+CTSDSR: 1",
    # "2,4567891,0,9876543,0,88\r\n0A007264E2654E99020810\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r",
    # "\n0A007200A26531D958A820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A007212B",
    # "A6532E9586820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,8",
    # "8\r\n0A007222AA6538FA584820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A00723",
    # "19A653EE1526820\r\n",
    # "\r",
    # "\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A007240A26540294E8820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A0072",
    # "4FBA654232348820\r\n",
    # "\r\n+CTSDS",
    # "R: 12,1234567,0,9876543,0,88\r\n0A30000000000007FFE810\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A007253126548A9",
    # "4DE820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A00",
    # "72563A655091522820\r\n",
    # "\r\n+CTSDSR: 12,1472583,0,9876543,0,88\r\n0A00725E1265519254A820",
    # "\r\n",
    # "\r\n+CTSDSR",
    # ": 12,1472583,0,9876543,0,88\r\n0A007265EA654EAA020820\r\n",
    # "\r\n+CTSDSR: 12,4567891,0,9876543,0,88\r\n0A007264E2654E",
    # "91020810\r\n",
    # "\r\n+CTSDSR: 12,1234567,0,9876543,0,88\r\n0A30",
    # "000000000007FFE810\r\n",
]


# Frage-Antwort-Mapping (beliebig erweiterbar)
qa_map = {
    b"ATZ\r\n": b"\r\nOK\r\n",
    b"AT+GMI?\r\n": b"\r\n+GMI: Motorola\r\n",
    b"AT+GMM?\r\n": b"\r\n+GMM: 54009,M83AAA1BB2CC,91.2.0.0\r\n",
    b"AT+GMR?\r\n": b"\r\n+GMR: R11.222.3333\r\n",
    b"AT+CTSP=2,0\r\n": b"\r\nOK\r\n",
    b"AT+CTSP=2,1\r\n": b"\r\nOK\r\n",
    b"AT+CTSP=2,2\r\n": b"\r\nOK\r\n",
    b"AT+CTSP=2,3\r\n": b"\r\nOK\r\n",
    b"AT+CTSP=2,4\r\n": b"\r\nOK\r\n",
    b"AT+CTSP=1,2,20\r\n": b"\r\nOK\r\n",
    b"AT+CTSP=2,2,20\r\n": b"\r\nOK\r\n",
    b"AT+CTSP=1,3,130\r\n": b"\r\nOK\r\n",
    b"AT+CTSP=1,3,131\r\n": b"\r\nOK\r\n",
    b"AT+CTSP=1,3,10\r\n": b"\r\nOK\r\n",
    b"AT+CTSP=1,3,137\r\n": b"\r\nOK\r\n",
    b"AT+CTSP=1,3,138\r\n": b"\r\nOK\r\n",
}

stop_flag = False


def wait_for_enter():
    input("Drücke Enter zum Abbrechen...\n")
    global stop_flag
    stop_flag = True


threading.Thread(target=wait_for_enter, daemon=True).start()

start = time.time()
with serial.Serial(SERIAL_PORT, BAUDRATE, timeout=TIMEOUT) as ser:
    print(
        f"Listening on {SERIAL_PORT} ... (Ctrl+C to exit and 'Enter' to stop listening and start sending)"
    )
    try:
        while not stop_flag:
            data = ser.readline()
            if data:
                print(f"Received: {data!r}")
                response = qa_map.get(
                    data, b"CME ERROR: 3\r\n"
                )  # Standardantwort bei unbekannter Anfrage
                ser.write(response)
                print(f"Sent: {response!r}")

        print("Stopped listening. Starting to send messages...")

        for message in messages:
            time.sleep(TIMEOUT)
            ser.write(message.encode())
            print(f"Sent message: {message.strip()!r}")

        print("All messages sent successfully.")

    except KeyboardInterrupt:
        print("Abbruch durch Benutzer.")
